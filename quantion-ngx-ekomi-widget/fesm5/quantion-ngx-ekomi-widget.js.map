{"version":3,"file":"quantion-ngx-ekomi-widget.js","sources":["ng://quantion-ngx-ekomi-widget/lib/enums/ekomi-widget-type.enum.ts","ng://quantion-ngx-ekomi-widget/lib/services/ekomi-widget.service.ts","ng://quantion-ngx-ekomi-widget/lib/components/ekomi-rank-widget/ekomi-rank-widget.component.ts","ng://quantion-ngx-ekomi-widget/lib/components/ekomi-showroom-widget/ekomi-showroom-widget.component.ts","ng://quantion-ngx-ekomi-widget/lib/components/ekomi-smart-widget/ekomi-smart-widget.component.ts","ng://quantion-ngx-ekomi-widget/lib/quantion-ngx-ekomi-widget.module.ts","ng://quantion-ngx-ekomi-widget/public-api.ts","ng://quantion-ngx-ekomi-widget/quantion-ngx-ekomi-widget.ts"],"sourcesContent":["export enum EkomiWidgetTypeEnum {\r\n  reputami_rank = 'reputami_rank',\r\n  reputami_showroom = 'reputami_showroom',\r\n}\r\n","import { Injectable, RendererFactory2 } from '@angular/core';\nimport { EkomiWidgetTypeEnum } from '../enums/ekomi-widget-type.enum';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class EkomiWidgetService {\n\n  // tslint:disable: variable-name\n  // tslint:disable: no-inferrable-types\n  private _ekomiShowRoomJs: boolean = false;\n  private _ekomiRankJs: boolean = false;\n\n  constructor(\n    private rendererFactory: RendererFactory2\n\n  ) { }\n\n  loadScriptShowroomWidget(v: string, locale: string): void {\n    if (!this._ekomiShowRoomJs) {\n     this.loadScript(EkomiWidgetTypeEnum.reputami_showroom, v, locale);\n     this._ekomiShowRoomJs = true;\n    }\n  }\n\n  loadScriptRankWidget(v: string, locale: string): void {\n    if (!this._ekomiRankJs) {\n     this.loadScript(EkomiWidgetTypeEnum.reputami_rank, v, locale);\n     this._ekomiRankJs = true;\n    }\n  }\n\n  loadScript(type: EkomiWidgetTypeEnum, v: string, locale: string): void {\n    const renderer = this.rendererFactory.createRenderer(null, null);\n    const script = renderer.createElement('script');\n    script.src = `//lite.ekomiapps.de/widget.js?type=${ type }&v=${ v }&locale=${ locale }`;\n    const head = renderer.selectRootElement('head', true);\n    renderer.appendChild(head, script);\n  }\n\n  loadSmartWidget(customerId: string, language: string, widgetTokens: string, draftMode: boolean = false): void {\n    ((w) => {\n      // tslint:disable: no-string-literal\n      w['_ekomiWidgetsServerUrl'] = (document.location.protocol === 'https:' ? 'https:' : 'http:') + '//widgets.ekomi.com';\n      w['_customerId'] = customerId;\n      w['_ekomiDraftMode'] = draftMode;\n      w['_language'] = language;\n      if (typeof(w['_ekomiWidgetTokens']) !== 'undefined') {\n        w['_ekomiWidgetTokens'][w['_ekomiWidgetTokens'].length] = widgetTokens;\n      } else {\n        w['_ekomiWidgetTokens'] = new Array(widgetTokens);\n      }\n\n      const scr = document.createElement('script');\n      scr.setAttribute('id', 'ekomiWidgetJs');\n      scr.src = 'https://sw-assets.ekomiapps.de/static_resources/widget.js';\n      const head = document.getElementsByTagName('head')[0];\n      head.appendChild(scr);\n    })(window);\n  }\n\n  removeSmartWidgetScript(): void {\n    const scriptEkomiwidget = document.getElementById('ekomiWidgetJs');\n    scriptEkomiwidget.remove();\n  }\n\n}\n","import { Component, OnInit, Input, AfterViewInit } from '@angular/core';\r\nimport { EkomiWidgetService } from '../../services/ekomi-widget.service';\r\n\r\n@Component({\r\n  // tslint:disable-next-line: component-selector\r\n  selector: 'quantion-ekomi-rank-widget',\r\n  templateUrl: './ekomi-rank-widget.component.html',\r\n  styleUrls: ['./ekomi-rank-widget.component.scss']\r\n})\r\nexport class EkomiRankWidgetComponent implements OnInit, AfterViewInit {\r\n\r\n  @Input() v: string;\r\n  @Input() locale: string;\r\n  @Input() id: string;\r\n\r\n  constructor(\r\n    private ekomiWidgetService: EkomiWidgetService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.ekomiWidgetService.loadScriptRankWidget(this.v, this.locale);\r\n  }\r\n\r\n}\r\n","import { Component, OnInit, Input, AfterViewInit } from '@angular/core';\r\nimport { EkomiWidgetService } from '../../services/ekomi-widget.service';\r\n\r\n\r\n@Component({\r\n  // tslint:disable-next-line: component-selector\r\n  selector: 'quantion-ekomi-showroom-widget',\r\n  templateUrl: './ekomi-showroom-widget.component.html',\r\n  styleUrls: ['./ekomi-showroom-widget.component.scss']\r\n})\r\nexport class EkomiShowroomWidgetComponent implements OnInit, AfterViewInit {\r\n\r\n  @Input() v: string;\r\n  @Input() locale: string;\r\n  @Input() id: string;\r\n\r\n  constructor(\r\n    private ekomiWidgetService: EkomiWidgetService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.ekomiWidgetService.loadScriptShowroomWidget(this.v, this.locale);\r\n  }\r\n\r\n}\r\n","import { Component, OnInit, Input, AfterViewInit, OnDestroy } from '@angular/core';\r\nimport { EkomiWidgetService } from '../../services/ekomi-widget.service';\r\n\r\n@Component({\r\n  // tslint:disable-next-line: component-selector\r\n  selector: 'quantion-ekomi-smart-widget',\r\n  templateUrl: './ekomi-smart-widget.component.html',\r\n  styleUrls: ['./ekomi-smart-widget.component.scss']\r\n})\r\nexport class EkomiSmartWidgetComponent implements OnInit, AfterViewInit, OnDestroy {\r\n\r\n  @Input() customerId: string;\r\n  @Input() language: string;\r\n  @Input() widgetTokens: string;\r\n  // tslint:disable-next-line: no-inferrable-types\r\n  @Input() draftMode: boolean = false;\r\n\r\n  constructor(\r\n    private ekomiWidgetService: EkomiWidgetService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.ekomiWidgetService.loadSmartWidget(this.customerId, this.language, this.widgetTokens, this.draftMode);\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.ekomiWidgetService.removeSmartWidgetScript();\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { EkomiRankWidgetComponent } from './components/ekomi-rank-widget/ekomi-rank-widget.component';\r\nimport { EkomiShowroomWidgetComponent } from './components/ekomi-showroom-widget/ekomi-showroom-widget.component';\r\nimport { EkomiSmartWidgetComponent } from './components/ekomi-smart-widget/ekomi-smart-widget.component';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    EkomiRankWidgetComponent,\r\n    EkomiShowroomWidgetComponent,\r\n    EkomiSmartWidgetComponent\r\n  ],\r\n  imports: [\r\n  ],\r\n  exports: [\r\n    EkomiRankWidgetComponent,\r\n    EkomiShowroomWidgetComponent,\r\n    EkomiSmartWidgetComponent\r\n  ]\r\n})\r\nexport class QuantionNgxEkomiWidgetModule { }\r\n","/*\n * Public API Surface of quantion-ngx-ekomi-widget\n */\n\nexport * from './lib/components/ekomi-rank-widget/ekomi-rank-widget.component';\nexport * from './lib/components/ekomi-showroom-widget/ekomi-showroom-widget.component';\nexport * from './lib/components/ekomi-smart-widget/ekomi-smart-widget.component';\nexport * from './lib/quantion-ngx-ekomi-widget.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n\nexport {EkomiWidgetService as Éµa} from './lib/services/ekomi-widget.service';"],"names":[],"mappings":";;;AAAA,IAAY,mBAGX;AAHD,WAAY,mBAAmB;IAC7B,sDAA+B,CAAA;IAC/B,8DAAuC,CAAA;AACzC,CAAC,EAHW,mBAAmB,KAAnB,mBAAmB;;;ICa7B,4BACU,eAAiC;QAAjC,oBAAe,GAAf,eAAe,CAAkB;;;QAJnC,qBAAgB,GAAY,KAAK,CAAC;QAClC,iBAAY,GAAY,KAAK,CAAC;KAKjC;IAEL,qDAAwB,GAAxB,UAAyB,CAAS,EAAE,MAAc;QAChD,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE;YAC3B,IAAI,CAAC,UAAU,CAAC,mBAAmB,CAAC,iBAAiB,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC;YAClE,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;SAC7B;KACF;IAED,iDAAoB,GAApB,UAAqB,CAAS,EAAE,MAAc;QAC5C,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;YACvB,IAAI,CAAC,UAAU,CAAC,mBAAmB,CAAC,aAAa,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC;YAC9D,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;SACzB;KACF;IAED,uCAAU,GAAV,UAAW,IAAyB,EAAE,CAAS,EAAE,MAAc;QAC7D,IAAM,QAAQ,GAAG,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;QACjE,IAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QAChD,MAAM,CAAC,GAAG,GAAG,wCAAuC,IAAI,WAAQ,CAAC,gBAAa,MAAS,CAAC;QACxF,IAAM,IAAI,GAAG,QAAQ,CAAC,iBAAiB,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;QACtD,QAAQ,CAAC,WAAW,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;KACpC;IAED,4CAAe,GAAf,UAAgB,UAAkB,EAAE,QAAgB,EAAE,YAAoB,EAAE,SAA0B;QAA1B,0BAAA,EAAA,iBAA0B;QACpG,CAAC,UAAC,CAAC;;YAED,CAAC,CAAC,wBAAwB,CAAC,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,KAAK,QAAQ,GAAG,QAAQ,GAAG,OAAO,IAAI,qBAAqB,CAAC;YACrH,CAAC,CAAC,aAAa,CAAC,GAAG,UAAU,CAAC;YAC9B,CAAC,CAAC,iBAAiB,CAAC,GAAG,SAAS,CAAC;YACjC,CAAC,CAAC,WAAW,CAAC,GAAG,QAAQ,CAAC;YAC1B,IAAI,QAAO,CAAC,CAAC,oBAAoB,CAAC,CAAC,KAAK,WAAW,EAAE;gBACnD,CAAC,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC,oBAAoB,CAAC,CAAC,MAAM,CAAC,GAAG,YAAY,CAAC;aACxE;iBAAM;gBACL,CAAC,CAAC,oBAAoB,CAAC,GAAG,IAAI,KAAK,CAAC,YAAY,CAAC,CAAC;aACnD;YAED,IAAM,GAAG,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;YAC7C,GAAG,CAAC,YAAY,CAAC,IAAI,EAAE,eAAe,CAAC,CAAC;YACxC,GAAG,CAAC,GAAG,GAAG,2DAA2D,CAAC;YACtE,IAAM,IAAI,GAAG,QAAQ,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;YACtD,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;SACvB,EAAE,MAAM,CAAC,CAAC;KACZ;IAED,oDAAuB,GAAvB;QACE,IAAM,iBAAiB,GAAG,QAAQ,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC;QACnE,iBAAiB,CAAC,MAAM,EAAE,CAAC;KAC5B;;gBAlD0B,gBAAgB;;;IARhC,kBAAkB;QAH9B,UAAU,CAAC;YACV,UAAU,EAAE,MAAM;SACnB,CAAC;OACW,kBAAkB,CA4D9B;6BAlED;CAMA;;;ICSE,kCACU,kBAAsC;QAAtC,uBAAkB,GAAlB,kBAAkB,CAAoB;KAC3C;IAEL,2CAAQ,GAAR;KACC;IAED,kDAAe,GAAf;QACE,IAAI,CAAC,kBAAkB,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;KACnE;;gBAR6B,kBAAkB;;IALvC;QAAR,KAAK,EAAE;uDAAW;IACV;QAAR,KAAK,EAAE;4DAAgB;IACf;QAAR,KAAK,EAAE;wDAAY;IAJT,wBAAwB;QANpC,SAAS,CAAC;;YAET,QAAQ,EAAE,4BAA4B;YACtC,0EAAiD;;SAElD,CAAC;OACW,wBAAwB,CAiBpC;IAAD,+BAAC;CAjBD;;;ICOE,sCACU,kBAAsC;QAAtC,uBAAkB,GAAlB,kBAAkB,CAAoB;KAC3C;IAEL,+CAAQ,GAAR;KACC;IAED,sDAAe,GAAf;QACE,IAAI,CAAC,kBAAkB,CAAC,wBAAwB,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;KACvE;;gBAR6B,kBAAkB;;IALvC;QAAR,KAAK,EAAE;2DAAW;IACV;QAAR,KAAK,EAAE;gEAAgB;IACf;QAAR,KAAK,EAAE;4DAAY;IAJT,4BAA4B;QANxC,SAAS,CAAC;;YAET,QAAQ,EAAE,gCAAgC;YAC1C,8EAAqD;;SAEtD,CAAC;OACW,4BAA4B,CAiBxC;IAAD,mCAAC;CAjBD;;;ICOE,mCACU,kBAAsC;QAAtC,uBAAkB,GAAlB,kBAAkB,CAAoB;;QAHvC,cAAS,GAAY,KAAK,CAAC;KAI/B;IAEL,4CAAQ,GAAR;KACC;IAED,mDAAe,GAAf;QACE,IAAI,CAAC,kBAAkB,CAAC,eAAe,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;KAC5G;IAED,+CAAW,GAAX;QACE,IAAI,CAAC,kBAAkB,CAAC,uBAAuB,EAAE,CAAC;KACnD;;gBAZ6B,kBAAkB;;IAPvC;QAAR,KAAK,EAAE;iEAAoB;IACnB;QAAR,KAAK,EAAE;+DAAkB;IACjB;QAAR,KAAK,EAAE;mEAAsB;IAErB;QAAR,KAAK,EAAE;gEAA4B;IANzB,yBAAyB;QANrC,SAAS,CAAC;;YAET,QAAQ,EAAE,6BAA6B;YACvC,yHAAkD;;SAEnD,CAAC;OACW,yBAAyB,CAuBrC;IAAD,gCAAC;CAvBD;;;ICYA;KAA6C;IAAhC,4BAA4B;QAdxC,QAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,wBAAwB;gBACxB,4BAA4B;gBAC5B,yBAAyB;aAC1B;YACD,OAAO,EAAE,EACR;YACD,OAAO,EAAE;gBACP,wBAAwB;gBACxB,4BAA4B;gBAC5B,yBAAyB;aAC1B;SACF,CAAC;OACW,4BAA4B,CAAI;IAAD,mCAAC;CAA7C;;ACrBA;;;;ACAA;;;;;;"}